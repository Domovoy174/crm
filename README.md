# CRM-FRONTEND

[Domovoy174](https://github.com/Domovoy174)

web-интерфейс для CRM системы с следующими возможностями:

* Просмотр списка людей в виде таблицы
* Добавление нового клиента
* Изменение информации о существующем клиенте

Каждый контакт представляет из себя следующий набор данных:

* Имя
* Фамилия
* Отчество
* Массив объектов с контактами данными, где каждый объект содержит:
  * Тип контакта (телефон, email, VK и тд.)
  * Значение контакта(номер телефона, адрес email и т.п.)

Интерфейс представляет собой единую  страницу, на которой располагается таблица клиентов,
кнопка для добавления нового клиента, а также шапка с логотипом компании и строкой поиска клиентов.

## Описание экранов приложения

### Таблица со списком клиентов

Таблица со списком людей имеет следующие колонки:

* ID
* ФИО (Фамилия Имя Отчество через пробел)
* Дата и время создания
* Дата и время последнего изменения
* Контакты
* Действия(кнопки)
  * Изменить клиента
  * Удалить клиента

Таблица строиться на основе данных из API.
При первичной загрузке нужно отображать индикатор загрузки, пока таблица с данными не будет построена.

### Сортировка

Все заголовки колонок, кроме контактов и действий, можно нажать, чтобы установить сортировку по соответствующему полю.
Первое нажатие устанавливает сортировку по возрастанию, повторное - по убыванию.

### Поиск

При вводе текста в поле для поиска данные для таблицы будут запрошены из API с введённым поисковым запросом.
При этом запрос отправляться только по прошествии ЗООмс с момента последнего ввода символа в поле

### Отображение контактов клиента

В колонке с контактами для контактов VK, Facebook, телефона и email  отображаются соответствующие иконки.
Все остальные виды контактов отображаются с одинаковыми иконками с человечком.

При наведении указателя на контакт появляется всплывающая подсказка с типом и значением этого контакта.

### Действия над клиентами

При нажатии на кнопку "Изменить" появляется модальное окно с формой изменения клиента.

При нажатии на кнопку "Удалить"  появляется модальное окно с подтверждением действия.
Если пользователь подтверждает удаление, то человек будет удалён из списка.
Также на сервер с API посылается запрос на удаление.

### Формы создания или редактирования данных о клиентах

Форма создания клиента  открывается в виде модального окна по нажатию на кнопку "Добавить клиента", находящуюся под таблицей.
Форма редактирования клиента открывается по нажатию на кнопку "Изменить" в таблице клиентов.
Форма создания клиента открывается сразу с незаполненными полями.
При изменении клиента перед открытием формы из API запрашиваются свежие данные клиента. Форма должна быть заполнена соответствующими данными клиента.

### Контакты клиента

В блоке контактов есть возможность добавления до 10 контактов включительно.
Если у клиента уже добавлено 10 контактов, кнопка не отображается.
Каждый контакт можно удалить из списка по нажатию на крестик справа от него.

### Кнопки

Под формой располагаются кнопка "Сохранить". Кнопка "Удалить клиента" добавляется, если это форма редактирования существующего в базе данных человека. По нажатию на кнопку удаления клиент будет удалён из таблицы, а на сервер API будет отправлен запрос на удаление клиента. По нажатию на кнопку сохранения изменения будут отправлены на сервер.
Кнопка копировать - сохранит ссылку на карточку клиента в буфер обмена.
Далее в зависимости от ответа сервера:

* Если сохранение прошло успешно (статус 200 или 201), модальное окно с формой закроется. Таблица будет отрисована заново
* Если при сохранение произошла ошибка (статус 422, 404 или 5хх), то отобразится сообщение об ошибке, полученные в ответе сервера, над блоком с кнопками. Если ответ сервера не удалось распознать, то отобразится сообщен е по умолчанию "Что-то пошло не так ..."

## Валидация формы перед отправкой на сервер

* Имя и фамилия обязательны для заполнения
* Каждый добавленный контакт должен быть полностью заполнен

При неуспешной проверке появляется сообщения об ошибках, а также подсвечивается ошибочные поля.
Поле перестанет подсвечиваться как ошибочное, как только пользователь начал изменять в нём значение.

## Индикация загрузки в 3-х случаях

1. Загрузка таблицы со списком клиентов при открытии страницы, после ввода значения в поле для поиска и т.п.
2. Загрузка данных клиента при открытии формы редактирования.
3. Отправка формы создания или редактирования клиента.

Время ожидания ответа сервера = 7сек

## Поиск с авто дополнением

Реализован через запрос к API

## Использование

1. В каталоге "crm-backend" запустить сервер
    node index.js

2. В каталоге "crm-frontend" запустить HTML
    index.html

[EOF]
